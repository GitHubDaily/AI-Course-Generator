# 第二条工作流：模块详细内容生成器

## 📋 工作流概述

**工作流名称：** `ModuleContentGenerator`

**功能描述：** 
根据课程大纲中的单个模块信息，生成详细的教学内容，包括教学计划、案例、练习题和教学建议。

**与第一条工作流的关系：**
```
工作流1（已完成）              工作流2（本次搭建）
CourseOutlineGenerator  →    ModuleContentGenerator
      ↓                              ↓
  生成课程大纲                   生成详细教学内容
  (4个模块概览)                  (单个模块的详细展开)
```

---

## 🎯 工作流设计

### 输入

**来源：** 
- 工作流1 生成的大纲中的**单个模块**信息
- 对应的课本原文内容

**输入参数：**

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| MODULE_INFO | JSON字符串 | 是 | 单个模块的完整信息 | 见下方示例 |
| TEXTBOOK_CONTENT | 文本 | 是 | 相关的课本原文 | 课文内容 |
| DETAIL_LEVEL | 文本 | 否 | 详细程度 | "standard" / "detailed" |
| EXERCISE_COUNT | 数字 | 否 | 练习题数量 | 默认 5 |

### 输出

**格式：** JSON

**包含内容：**
1. 教学计划（4个环节）
2. 教学案例（2-3个）
3. 练习题（5-10道，含答案）
4. 教学建议（3-5条）

---

## 🔧 详细搭建步骤

### 步骤1：创建工作流

1. 在讯飞星辰平台点击"新建工作流"
2. 填写基本信息：
   - **名称：** `ModuleContentGenerator`
   - **描述：** `为单个学习模块生成详细的教学内容`
   - **分类：** 教育/助手

---

### 步骤2：配置输入节点

**添加以下输入参数：**

#### 参数1：MODULE_INFO
```
参数名：MODULE_INFO
类型：文本(string)
必填：是
描述：单个模块的JSON信息，包含模块ID、标题、学习目标等
```

#### 参数2：TEXTBOOK_CONTENT
```
参数名：TEXTBOOK_CONTENT
类型：文本(string)
必填：是
描述：与该模块相关的课本原文内容
```

#### 参数3：DETAIL_LEVEL（可选）
```
参数名：DETAIL_LEVEL
类型：文本(string)
必填：否
默认值：standard
描述：内容详细程度，可选值：simple/standard/detailed
```

#### 参数4：EXERCISE_COUNT（可选）
```
参数名：EXERCISE_COUNT
类型：数字(number)
必填：否
默认值：5
描述：生成的练习题数量
```

---

### 步骤3：添加大模型节点

#### 基础配置

**节点名称：** `详细内容生成`

**模型选择：**
- 模型：**讯飞星火 Spark X1-32K**
- Temperature：`0.8`（比大纲生成稍高，需要更多创造性）
- Max Tokens：`3000`（需要生成更多内容）

---

#### System Prompt（系统提示词）

```
你是一位经验丰富的小学教师和教学设计专家，擅长设计具体的教学活动和练习题。

你的任务是：
1. 根据模块的学习目标，设计详细的教学计划
2. 创造贴近学生生活的教学案例
3. 编写不同难度的练习题（含答案和解析）
4. 提供实用的教学建议

要求：
- 教学设计要符合小学生的认知水平和年龄特点
- 教学活动要具体可操作，教师能直接使用
- 练习题要有层次性，从易到难
- 案例要生动有趣，贴近学生生活
- 答案和解析要准确、易懂
- 严格按照 JSON 格式输出
```

---

#### User Prompt（用户提示词）

```
请为以下学习模块生成详细的教学内容。

【模块信息】
{MODULE_INFO}

【相关课本内容】
{TEXTBOOK_CONTENT}

【生成要求】
- 详细程度：{DETAIL_LEVEL}
- 练习题数量：{EXERCISE_COUNT}

【输出格式】
请严格按照以下 JSON 格式输出：

{
  "module_id": "模块ID",
  "teaching_plan": {
    "introduction": {
      "duration": "时长（如：5分钟）",
      "activity": "具体的导入活动描述",
      "teacher_guidance": "教师引导语或操作要点",
      "expected_outcome": "预期达成的效果"
    },
    "main_content": {
      "duration": "时长（如：25分钟）",
      "activities": [
        {
          "name": "活动名称",
          "description": "活动详细描述",
          "duration": "时长",
          "materials": "需要的材料",
          "steps": [
            "步骤1",
            "步骤2",
            "步骤3"
          ]
        }
      ]
    },
    "practice": {
      "duration": "时长（如：8分钟）",
      "activities": [
        "活动1描述",
        "活动2描述"
      ]
    },
    "summary": {
      "duration": "时长（如：2分钟）",
      "content": "总结内容",
      "homework": "课后作业（可选）"
    }
  },
  "examples": [
    {
      "title": "案例标题",
      "content": "案例详细内容（100-200字）",
      "purpose": "教学目的说明",
      "how_to_use": "使用建议"
    }
  ],
  "exercises": [
    {
      "id": "EX001",
      "type": "题型（填空/选择/简答/判断）",
      "question": "题目内容",
      "options": ["选项A", "选项B"],
      "answer": "答案",
      "difficulty": "难度（easy/medium/hard）",
      "explanation": "答案解析（为什么这样答）",
      "related_objective": "对应的学习目标"
    }
  ],
  "teaching_tips": [
    {
      "category": "类别（重点强调/常见问题/差异化教学/课堂管理）",
      "tip": "具体建议内容"
    }
  ]
}

【具体要求】

1. **教学计划：**
   - 导入环节（5分钟）：设计吸引学生注意力的活动
   - 主要内容（25-30分钟）：包含2-3个具体活动，每个活动有清晰的步骤
   - 练习环节（8-10分钟）：设计互动性强的练习活动
   - 总结环节（2-5分钟）：梳理重点，布置作业

2. **教学案例：**
   - 生成 2-3 个案例
   - 贴近学生生活，容易理解
   - 能够支持教学目标的达成
   - 每个案例 100-200 字

3. **练习题：**
   - 生成 {EXERCISE_COUNT} 道题
   - 题型分布：40%基础题（easy）、40%中等题（medium）、20%拓展题（hard）
   - 包含多种题型：填空、选择、简答、判断等
   - 每道题必须有答案和详细解析
   - 解析要说明"为什么这样答"

4. **教学建议：**
   - 生成 3-5 条实用建议
   - 覆盖：重点强调、常见问题预判、差异化教学、课堂管理
   - 具体可操作

【重要提示】
1. 必须输出完整的、格式正确的 JSON
2. 不要输出任何 JSON 之外的文字
3. 练习题的难度要递进
4. 教学活动要具体，教师能直接使用
5. 所有内容必须基于提供的模块信息和课本内容
6. 时间分配要合理，总时长应接近模块的 duration_minutes

现在请开始生成：
```

---

### 步骤4：添加输出节点

**输出配置：**

| 输出参数名 | 来源 | 说明 |
|-----------|------|------|
| detailed_content | 大模型节点输出 | 完整的详细内容 JSON |
| module_id | 从输入解析 | 模块ID，用于关联 |

---

### 步骤5：节点连接

```
[输入节点] → [大模型节点] → [输出节点]
```

---

## 🧪 测试工作流

### 测试数据准备

#### 测试输入：MODULE_INFO

使用工作流1生成的第一个模块信息：

```json
{
  "module_id": "M001",
  "title": "春天的脚步——感知季节变化",
  "description": "通过《春天来了》学习拟人修辞手法，用多感官观察和描述春天的特征，培养对大自然的观察力和感受力。",
  "sequence": 1,
  "duration_minutes": 80,
  "learning_objectives": [
    "能够说出春天的至少5个主要特征（小草、野花、嫩芽、小溪、动物）",
    "能够理解并运用拟人修辞手法描写自然景物",
    "能够用眼、耳、鼻、手等多感官观察和感受春天",
    "能够背诵课文并有感情地朗读",
    "培养热爱大自然、主动观察自然的兴趣和习惯"
  ],
  "key_concepts": [
    "拟人修辞手法",
    "多感官观察法",
    "季节特征描述"
  ]
}
```

#### 测试输入：TEXTBOOK_CONTENT

```
第1课 春天来了

春天来了，春天来了！

小草从地下探出头来，那是春天的眉毛吧？
早开的野花一朵两朵，那是春天的眼睛吧？
树木吐出点点嫩芽，那是春天的音符吧？
解冻的小溪叮叮咚咚，那是春天的琴声吧？

春天来了！我们看到了她，我们听到了她，我们闻到了她，我们触到了她。她在柳枝上荡秋千，在风筝尾巴上摇啊摇；她在喜鹊、杜鹃嘴里叫，在桃花、杏花枝头笑。

学习目标：
1. 能够说出春天的主要特征
2. 理解并运用拟人修辞手法
3. 培养观察自然的兴趣

重点词语：
探出、嫩芽、音符、叮咚、荡秋千、杜鹃
```

#### 其他参数

```
DETAIL_LEVEL: standard
EXERCISE_COUNT: 5
```

---

### 预期输出示例

```json
{
  "module_id": "M001",
  "teaching_plan": {
    "introduction": {
      "duration": "5分钟",
      "activity": "播放春天景色的视频（小草发芽、花朵开放、小溪流淌），配合轻快的音乐",
      "teacher_guidance": "同学们，刚才视频里出现了哪些景物？你们看到春天了吗？今天我们一起来寻找春天的脚步！",
      "expected_outcome": "激发学生对春天的兴趣，调动学生的观察经验"
    },
    "main_content": {
      "duration": "30分钟",
      "activities": [
        {
          "name": "课文初读",
          "description": "教师范读课文，学生跟读，感受课文的节奏和美感",
          "duration": "10分钟",
          "materials": "课文朗读音频、课本",
          "steps": [
            "教师有感情地范读全文",
            "学生自由朗读，注意读准字音",
            "指名学生朗读，师生评议",
            "全班齐读，读出问句的语气"
          ]
        },
        {
          "name": "拟人手法学习",
          "description": "找出课文中的拟人句，理解拟人修辞的作用",
          "duration": "12分钟",
          "materials": "PPT展示拟人句、小黑板",
          "steps": [
            "找一找：课文中哪些句子把事物当作人来写？",
            "读一读：有感情地朗读这些拟人句",
            "比一比：'小草长出来了'和'小草探出头来'有什么不同？",
            "说一说：拟人句让我们感受到了什么？",
            "练一练：用拟人手法说一个描写春天的句子"
          ]
        },
        {
          "name": "多感官体验春天",
          "description": "分析课文如何从视觉、听觉、触觉等角度描写春天",
          "duration": "8分钟",
          "materials": "感官分类表格、彩笔",
          "steps": [
            "填表格：将课文中描写春天的内容按照'看到''听到''闻到''触到'分类",
            "小组讨论：春天还可以用哪些感官感受？",
            "分享交流：每组派代表分享讨论结果"
          ]
        }
      ]
    },
    "practice": {
      "duration": "8分钟",
      "activities": [
        "完成课后练习第1-2题（找拟人句、仿写句子）",
        "小组活动：四人小组，每人说一个描写春天的拟人句",
        "课堂小练笔：用拟人手法写一句描写校园春天的话"
      ]
    },
    "summary": {
      "duration": "2分钟",
      "content": "今天我们学习了《春天来了》，认识了拟人修辞手法，学会了用多种感官观察春天。春天在小草里、在野花中、在嫩芽上、在小溪边，也在我们的眼睛里、耳朵里、鼻子里、手心里。",
      "homework": "1. 背诵课文\n2. 到校园或公园观察春天，用拟人手法写3句话\n3. 预习下一课"
    }
  },
  "examples": [
    {
      "title": "校园寻春活动",
      "content": "带领学生到校园里寻找春天的痕迹。让学生分组观察校园里的植物、动物、天气变化。要求学生用眼睛看颜色、用耳朵听声音、用鼻子闻气味、用手摸一摸（在安全的前提下）。每组记录至少5个春天的特征，回到教室后分享交流，并用拟人手法描述自己的发现。",
      "purpose": "将课文学习与实际观察结合，培养学生的观察能力和语言表达能力",
      "how_to_use": "可以在学习课文后的第二课时进行，或者作为综合实践活动。提前准备观察记录表，强调安全注意事项。"
    },
    {
      "title": "拟人句仿写游戏",
      "content": "准备一些春天景物的图片（如：桃花、柳树、蝴蝶、小鸟等），随机抽取图片，学生快速用拟人手法说一句话。例如：抽到'桃花'，可以说'桃花姑娘穿上了粉红色的裙子'。可以个人比赛，也可以小组接龙。",
      "purpose": "巩固拟人修辞手法的运用，激发学生的表达兴趣",
      "how_to_use": "适合在练习环节使用，可以调节课堂气氛。准备10-15张图片，控制游戏时间在5分钟左右。"
    },
    {
      "title": "春天的声音",
      "content": "播放一段春天的环境音（鸟叫、溪水声、风声等），闭上眼睛静静聆听。然后让学生描述听到了什么声音，想到了什么画面。引导学生模仿课文中'叮叮咚咚'这样的象声词，创造更多描写春天声音的词语。",
      "purpose": "培养学生的听觉观察能力，学习运用象声词",
      "how_to_use": "可以作为导入活动或课中调节活动。提前准备好音频，时长2-3分钟为宜。"
    }
  ],
  "exercises": [
    {
      "id": "EX001",
      "type": "填空",
      "question": "春天来了，________从地下探出头来。",
      "options": [],
      "answer": "小草",
      "difficulty": "easy",
      "explanation": "根据课文第一段内容，春天来了，小草从地下探出头来。这里'探出头来'是拟人的写法，形象地写出了小草生长的样子。",
      "related_objective": "能够说出春天的至少5个主要特征"
    },
    {
      "id": "EX002",
      "type": "判断",
      "question": "'小草从地下探出头来'这句话运用了拟人的修辞手法。",
      "options": ["正确", "错误"],
      "answer": "正确",
      "difficulty": "easy",
      "explanation": "'探出头来'是人的动作，这里用来描写小草，把小草当作人来写，所以运用了拟人修辞手法。拟人可以让描写更生动、更有趣。",
      "related_objective": "能够理解并运用拟人修辞手法描写自然景物"
    },
    {
      "id": "EX003",
      "type": "选择",
      "question": "课文中，作者用哪些感官来感受春天？",
      "options": [
        "A. 只有眼睛看",
        "B. 只有耳朵听",
        "C. 眼睛、耳朵、鼻子、手",
        "D. 只有鼻子闻"
      ],
      "answer": "C",
      "difficulty": "medium",
      "explanation": "课文最后说'我们看到了她，我们听到了她，我们闻到了她，我们触到了她'，说明作者用了眼睛（视觉）、耳朵（听觉）、鼻子（嗅觉）、手（触觉）来感受春天。多感官观察能让我们更全面地认识事物。",
      "related_objective": "能够用眼、耳、鼻、手等多感官观察和感受春天"
    },
    {
      "id": "EX004",
      "type": "简答",
      "question": "请仿照'小草从地下探出头来，那是春天的眉毛吧？'这个句式，写一个描写春天的拟人句。",
      "options": [],
      "answer": "示例答案：桃花绽开了笑脸，那是春天的微笑吧？（或：柳树摇着绿色的长辫子，那是春天的头发吧？）",
      "difficulty": "medium",
      "explanation": "这道题考查拟人手法的运用。首先要选择一个春天的景物，然后用拟人手法描写它，最后用'那是春天的...吧？'这样的句式。只要符合这个结构，内容合理，描写生动就可以。",
      "related_objective": "能够理解并运用拟人修辞手法描写自然景物"
    },
    {
      "id": "EX005",
      "type": "简答",
      "question": "春天的小溪为什么会'叮叮咚咚'？这样写有什么好处？",
      "options": [],
      "answer": "因为冬天结冰的小溪在春天解冻了，溪水流动起来，水流撞击石头会发出叮叮咚咚的声音。这样写用了象声词，让读者仿佛听到了溪水的声音，让描写更生动、更形象。",
      "difficulty": "hard",
      "explanation": "这道题有两个问题：第一问考查对自然现象的理解，第二问考查修辞效果的理解。'叮叮咚咚'是象声词，模拟了溪水的声音。使用象声词可以调动读者的听觉想象，让描写更有画面感和现场感。",
      "related_objective": "能够理解并运用拟人修辞手法描写自然景物"
    }
  ],
  "teaching_tips": [
    {
      "category": "重点强调",
      "tip": "拟人手法是本课的核心，要引导学生对比拟人句和普通句子的区别，让学生真正理解拟人手法的作用。可以通过朗读、对比、仿写等多种方式强化。"
    },
    {
      "category": "常见问题",
      "tip": "部分学生可能会混淆拟人和比喻。要明确：拟人是把物当作人来写（赋予人的动作、语言、情感），比喻是说一个事物像另一个事物（有本体、喻体、比喻词）。可以用具体例子对比讲解。"
    },
    {
      "category": "差异化教学",
      "tip": "对于学习困难的学生，可以降低仿写要求，先从简单的填空开始（如：'________披上了绿色的外衣'）。对于学有余力的学生，可以让他们尝试创作一首春天的小诗。"
    },
    {
      "category": "课堂管理",
      "tip": "在进行小组讨论时，要明确分工（记录员、发言人等），控制讨论时间，及时巡视指导。对于表现好的小组给予表扬，展示优秀成果，激励其他小组。"
    },
    {
      "category": "延伸拓展",
      "tip": "可以结合美术课，让学生画一画春天；结合音乐课，学唱春天的歌曲；或者开展'寻找校园里的春天'摄影活动。跨学科整合能让学习更丰富、更有趣。"
    }
  ]
}
```

---

## ✅ 测试检查清单

### 输出质量检查

- [ ] **JSON 格式正确**
  - 能够解析
  - 所有字段完整

- [ ] **教学计划**
  - [ ] 四个环节完整
  - [ ] 时间分配合理（总计约80分钟）
  - [ ] 活动具体可操作
  - [ ] 有清晰的步骤

- [ ] **教学案例**
  - [ ] 2-3 个案例
  - [ ] 贴近学生生活
  - [ ] 有明确的教学目的
  - [ ] 提供使用建议

- [ ] **练习题**
  - [ ] 数量正确（5道）
  - [ ] 题型多样
  - [ ] 难度递进
  - [ ] 答案准确
  - [ ] 解析详细

- [ ] **教学建议**
  - [ ] 3-5 条建议
  - [ ] 实用可操作
  - [ ] 覆盖多个方面

---

## 🔄 Prompt 优化建议

### 如果教学活动不够具体

在 Prompt 中增加：
```
教学活动必须包含：
- 活动的具体操作步骤（3-5步）
- 所需的教具和材料
- 教师的引导语示例
- 学生的预期反应
- 时间分配
```

### 如果练习题质量不高

强调：
```
练习题要求：
- 基础题（easy）：直接从课文找答案，考查识记能力
- 中等题（medium）：需要理解和简单应用，考查理解能力
- 拓展题（hard）：需要分析和创造，考查综合能力
- 解析要详细，包含"为什么""怎么做""注意什么"
```

### 如果案例不够生动

增加要求：
```
教学案例要求：
- 有具体的情境（时间、地点、人物）
- 有对话或动作描写
- 有明确的问题或任务
- 能够引发学生思考和讨论
```

---

## 📊 与工作流1的集成

### 数据流转

```
用户上传PDF
    ↓
提取文本
    ↓
【工作流1】生成大纲（4个模块）
    ↓
用户选择某个模块查看详情
    ↓
【工作流2】生成该模块的详细内容
    ↓
展示详细教学内容
```

### 后端调用流程

```python
# 伪代码示例

# 第1步：调用工作流1
outline = call_workflow_1(textbook_content)

# 第2步：用户点击某个模块
selected_module = outline["modules"][0]  # 选择第一个模块

# 第3步：调用工作流2
detailed_content = call_workflow_2(
    module_info=selected_module,
    textbook_content=textbook_content
)

# 第4步：展示结果
display(detailed_content)
```

---

## 🎯 下一步行动

### 立即执行（30分钟）

1. **创建工作流**
   - 按照步骤配置输入、大模型、输出节点

2. **测试工作流**
   - 使用提供的测试数据
   - 检查输出质量

3. **记录结果**
   - 工作流 ID
   - 测试输出的质量

4. **分享反馈**
   - 输出的 JSON 结果
   - 遇到的问题
   - 需要优化的地方

---

## 📝 测试数据文件

为了方便测试，我把测试数据整理成了单独的文件，你可以直接复制使用。

---

**准备好了就开始创建第二条工作流吧！🚀**

完成后告诉我：
1. 工作流是否创建成功
2. 生成的教学内容质量如何
3. 有哪些地方需要优化

有了这两条工作流，核心的 AI 能力就完成了，下一步就可以开始后端和前端开发了！💪
